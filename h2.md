# h2 Social sploit

## x) Lue/katso/kuuntele ja tiivistä. 

#### € Jaswal 2020: Mastering Metasploit - 4ed: Chapter 1: Approaching a Penetration Test Using Metasploit (kohdasta Conducting a penetration test with Metasploit luvun loppuun eli "Summary" loppuun)

## a) Kali ja Metaspoitable. 

Koneet eivät saa yhteyttä Internetiin mutta koneet saavat yhteyden toisiinsa.

![1](https://github.com/user-attachments/assets/6b8d3907-cc88-4213-9e97-813765bbd078)

![2](https://github.com/user-attachments/assets/f8895e1f-c588-42b7-a8b2-cf29f9e5cf06)

![3](https://github.com/user-attachments/assets/fe617f53-3854-4d6f-af36-8ad4b8c9dd5f)

![4](https://github.com/user-attachments/assets/052e9009-5fe1-41e4-941b-be680fdc94f1)

## b) Ota Metasploit msfconsole käyttöön

Aluksi alustin Metasploitin tietokannan:

    sudo msfdb init

![5](https://github.com/user-attachments/assets/599258af-2bb1-482a-9425-9ca8067c7695)

Varsinainen Metasploit-konsolin käynnistin:

    sudo msfconsole

![6](https://github.com/user-attachments/assets/c64380b8-9fd4-471e-8526-545de83d4d33)

## c) Etsi Metasploitable porttiskannaamalla (db_nmap -sn). 

Tein verkkoskannauksen:

    db_nmap -sn 192.168.250.0/24

![7](https://github.com/user-attachments/assets/3dd194dc-67c9-4cdd-8bcd-7c8c1f611829)

- **192.168.250.1**: Virtualboxissa määritelty osoite adapterille
- **192.168.250.2**: Virtualboxissa määritelty osoite DHCP:lle
- **192.168.250.3**: Kohde
- **192.168.250.5**: Kali itse

Tarkistin vielä selaimella, että kyseessä on Metasploitable.

![8](https://github.com/user-attachments/assets/ee06091d-0d49-4431-a6e3-d02a807f40e3)

## d) Porttiskannaa Metasploitable perusteellisesti. 

Skannasin tulokset ensin Metasploitin tietokantoihin (db_nmap).

![9](https://github.com/user-attachments/assets/1282980c-b524-4161-8a04-2400c415002c)

Sen jälkeen oli vuorossa tiedostoihin skannaus (nmap -oA foo).

Mietin tässä kohtaa miten -A ja -oA suhtautuvat toisiinsa. Onkohan -oA jo uitettuna aiemman komennon -A? Testasin ensin ajamalla nmapin -oA:lla.

![10](https://github.com/user-attachments/assets/ce1e8280-5b27-4bcc-b37c-6fbffe890557)

Huomasin, että skannaus näytti silloin eriltä kuin aiempi.

Lisäsin vielä erikseen -A takaisin paikalleen.

![11](https://github.com/user-attachments/assets/e090e745-1263-4ff9-9dc8-56cdab4dbde1)

Näytti siis siltä, että -A ja -oA ovat eri lippuja eikä siten yhdisty kuten alussa tuli mieleen.

## e) Tarkastele Metasploitin tietokantoihin tallennettuja tietoja komennoilla "hosts" ja "services". 

Kokeile suodattaa näitä listoja tai hakea niistä.

## f) Vertaile nmap:n omaa tiedostoon tallennusta ja db_nmap:n tallennusta tietokantoihin. 

Mitkä ovat eri tiedostomuotojen ja Metasploitin tietokannan hyvät puolet?

## g) Murtaudu Metasploitablen vsftpd-palveluun

## h) Päivitä äskeisen vsftpd-murron yhteydessä syntynyt sessio meterpretriin

## i) Kerää levittäytymisessä (lateral movement) tarvittavaa tietoa metasploitablesta. 

Analysoi tiedot. Selitä, miten niitä voisi hyödyntää.

## j) Murtaudu Metasploitableen jollain toisella tavalla. 

(Jos tämä kohta on vaikea, voit tarvittaessa turvautua verkosta löytyviin läpikävelyohjeisiin. Merkitse silloin raporttiin, missä määrin tarvitsit niitä).

## k) Demonstroi Meterpretrin ominaisuuksia.

## l) Tallenna shell-sessio tekstitiedostoon script-työkalulla (script -fa log001.txt)

## m) Vapaaehtoinen: Titityy. Saatko Metasploitableen tty-shellin, eli esimerkiksi avattua koko ruudulle piirtävän nano:n?

## n) Vapaaehtoinen, vaikea: Kokeile jotain kilpailevaa hyökkäystyökalua tai vihamielistä etäkäyttötyökalua, kuten Sliver

## o) Vapaaehtoinen, vaikea: Asenna ja korkkaa Metasploitable 3. Karvinen 2018: Install Metasploitable 3 – Vulnerable Target Computer
